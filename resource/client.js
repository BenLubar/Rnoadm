'use strict';var m,q=this;function aa(a,c){var b=a.split("."),d=q;b[0]in d||!d.execScript||d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)b.length||void 0===c?d=d[e]?d[e]:d[e]={}:d[e]=c}
function r(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c}function ba(a){var c=r(a);return"array"==c||"object"==c&&"number"==typeof a.length}function ca(a){return"string"==typeof a}function ea(a){return a[fa]||(a[fa]=++ga)}var fa="closure_uid_"+(1E9*Math.random()>>>0),ga=0;function ha(a,c,b){return a.call.apply(a.bind,arguments)}
function ia(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}}function s(a,c,b){s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return s.apply(null,arguments)}var ja=Date.now||function(){return+new Date};
function u(a,c){function b(){}b.prototype=c.prototype;a.J=c.prototype;a.prototype=new b};var v,ka,la,ma;function na(){return q.navigator?q.navigator.userAgent:null}ma=la=ka=v=!1;var oa;if(oa=na()){var pa=q.navigator;v=0==oa.lastIndexOf("Opera",0);ka=!v&&(-1!=oa.indexOf("MSIE")||-1!=oa.indexOf("Trident"));la=!v&&-1!=oa.indexOf("WebKit");ma=!v&&!la&&!ka&&"Gecko"==pa.product}var qa=v,w=ka,x=ma,sa=la;function ta(){var a=q.document;return a?a.documentMode:void 0}var ua;
a:{var va="",wa;if(qa&&q.opera)var xa=q.opera.version,va="function"==typeof xa?xa():xa;else if(x?wa=/rv\:([^\);]+)(\)|;)/:w?wa=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:sa&&(wa=/WebKit\/(\S+)/),wa)var ya=wa.exec(na()),va=ya?ya[1]:"";if(w){var za=ta();if(za>parseFloat(va)){ua=String(za);break a}}ua=va}var Aa={};
function y(a){var c;if(!(c=Aa[a])){c=0;for(var b=String(ua).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(b.length,d.length),f=0;0==c&&f<e;f++){var g=b[f]||"",h=d[f]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var p=k.exec(g)||["","",""],l=n.exec(h)||["","",""];if(0==p[0].length&&0==l[0].length)break;c=((0==p[1].length?0:parseInt(p[1],10))<(0==l[1].length?0:parseInt(l[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==l[1].length?
0:parseInt(l[1],10))?1:0)||((0==p[2].length)<(0==l[2].length)?-1:(0==p[2].length)>(0==l[2].length)?1:0)||(p[2]<l[2]?-1:p[2]>l[2]?1:0)}while(0==c)}c=Aa[a]=0<=c}return c}var Ba=q.document,Ca=Ba&&w?ta()||("CSS1Compat"==Ba.compatMode?parseInt(ua,10):5):void 0;var Da="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ea(a,c){for(var b,d,e=1;e<arguments.length;e++){d=arguments[e];for(b in d)a[b]=d[b];for(var f=0;f<Da.length;f++)b=Da[f],Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])}};var A=Array.prototype,Fa=A.indexOf?function(a,c,b){return A.indexOf.call(a,c,b)}:function(a,c,b){b=null==b?0:0>b?Math.max(0,a.length+b):b;if(ca(a))return ca(c)&&1==c.length?a.indexOf(c,b):-1;for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1},Ga=A.forEach?function(a,c,b){A.forEach.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=ca(a)?a.split(""):a,f=0;f<d;f++)f in e&&c.call(b,e[f],f,a)};function Ha(a){var c=a.length;if(0<c){for(var b=Array(c),d=0;d<c;d++)b[d]=a[d];return b}return[]};var Ia="StopIteration"in q?q.StopIteration:Error("StopIteration");function Ja(){}Ja.prototype.b=function(){throw Ia;};Ja.prototype.K=function(){return this};function Ka(a){if(a instanceof Ja)return a;if("function"==typeof a.K)return a.K(!1);if(ba(a)){var c=0,b=new Ja;b.b=function(){for(;;){if(c>=a.length)throw Ia;if(c in a)return a[c++];c++}};return b}throw Error("Not implemented");}
function La(a,c){if(ba(a))try{Ga(a,c,void 0)}catch(b){if(b!==Ia)throw b;}else{a=Ka(a);try{for(;;)c.call(void 0,a.b(),void 0,a)}catch(d){if(d!==Ia)throw d;}}};function Ma(a,c){this.l={};this.f=[];this.c=this.b=0;var b=arguments.length;if(1<b){if(b%2)throw Error("Uneven number of arguments");for(var d=0;d<b;d+=2)Na(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof Ma)for(d=Oa(a),Pa(a),e=[],b=0;b<a.f.length;b++)e.push(a.l[a.f[b]]);else{var b=[],f=0;for(d in a)b[f++]=d;d=b;b=[];f=0;for(e in a)b[f++]=a[e];e=b}for(b=0;b<d.length;b++)Na(this,d[b],e[b])}}function Oa(a){Pa(a);return a.f.concat()}
function Pa(a){if(a.b!=a.f.length){for(var c=0,b=0;c<a.f.length;){var d=a.f[c];Object.prototype.hasOwnProperty.call(a.l,d)&&(a.f[b++]=d);c++}a.f.length=b}if(a.b!=a.f.length){for(var e={},b=c=0;c<a.f.length;)d=a.f[c],Object.prototype.hasOwnProperty.call(e,d)||(a.f[b++]=d,e[d]=1),c++;a.f.length=b}}function Na(a,c,b){Object.prototype.hasOwnProperty.call(a.l,c)||(a.b++,a.f.push(c),a.c++);a.l[c]=b}
Ma.prototype.K=function(a){Pa(this);var c=0,b=this.f,d=this.l,e=this.c,f=this,g=new Ja;g.b=function(){for(;;){if(e!=f.c)throw Error("The map has changed since the iterator was created");if(c>=b.length)throw Ia;var g=b[c++];return a?g:d[g]}};return g};function Qa(){}Qa.prototype.b=null;var Ra={},Sa=null;function Ta(a){Sa||(Sa=new Qa,Ra[""]=Sa);var c;if(!(c=Ra[a])){c=new Qa;var b=a.lastIndexOf("."),d=a.substr(b+1),b=Ta(a.substr(0,b));b.b||(b.b={});b.b[d]=c;Ra[a]=c}return c};function B(){0!=Ua&&(Va[ea(this)]=this)}var Ua=0,Va={};B.prototype.g=!1;B.prototype.M=function(){if(!this.g&&(this.g=!0,this.k(),0!=Ua)){var a=ea(this);delete Va[a]}};B.prototype.k=function(){if(this.o)for(;this.o.length;)this.o.shift()()};function C(a,c){B.call(this);this.e=c;this.c=[];if(a>this.e)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.c.push(this.b())}u(C,B);C.prototype.b=function(){return{}};C.prototype.d=function(a){var c=typeof a;if("object"==c&&null!=a||"function"==c)if("function"==r(a.M))a.M();else for(var b in a)delete a[b]};C.prototype.k=function(){C.J.k.call(this);for(var a=this.c;a.length;)this.d(a.pop());delete this.c};function Wa(){this.c=[];this.e=new Ma;this.b=new Ma;this.o=1;this.g=new C(0,4E3);this.g.b=function(){return new Xa};this.r=new C(0,50);this.r.b=function(){return new Ya};var a=this;this.d=new C(0,2E3);this.d.b=function(){return String(a.o++)};this.d.d=function(){}}function Ya(){this.time=this.count=0}Ya.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Xa(){}
function Za(a,c,b){var d=[];-1==c?d.push("    "):d.push($a(a.c-c));d.push(" ",ab(a.c-0));0==a.b?d.push(" Start        "):1==a.b?(d.push(" Done "),d.push($a(a.g-a.startTime)," ms ")):d.push(" Comment      ");d.push(b,a);0<a.e&&d.push("[VarAlloc ",a.e,"] ");return d.join("")}Xa.prototype.toString=function(){return null==this.type?this.d:"["+this.type+"] "+this.d};
Wa.prototype.toString=function(){for(var a=[],c=-1,b=[],d=0;d<this.c.length;d++){var e=this.c[d];1==e.b&&b.pop();a.push(" ",Za(e,c,b.join("")));c=e.c;a.push("\n");0==e.b&&b.push("|  ")}if(0!=this.e.b){var f=ja();a.push(" Unstopped timers:\n");La(this.e,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",ab(b.startTime),")\n")})}c=Oa(this.b);for(d=0;d<c.length;d++)b=Object.prototype.hasOwnProperty.call(this.b.l,c[d])?this.b.l[c[d]]:void 0,1<b.count&&a.push(" TOTAL ",b,"\n");a.push("Total tracers created ",
0,"\n","Total comments created ",0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function $a(a){a=Math.round(a);var c="";1E3>a&&(c=" ");100>a&&(c="  ");10>a&&(c="   ");return c+a}function ab(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Wa;var bb="closure_listenable_"+(1E6*Math.random()|0);function cb(a){try{return!(!a||!a[bb])}catch(c){return!1}}var fb=0;function gb(a,c,b,d,e){this.m=a;this.H=null;this.src=c;this.type=b;this.capture=!!d;this.F=e;this.key=++fb;this.p=this.B=!1}function hb(a){a.p=!0;a.m=null;a.H=null;a.src=null;a.F=null};function ib(a){this.src=a;this.b={};this.c=0}ib.prototype.add=function(a,c,b,d,e){var f=this.b[a];f||(f=this.b[a]=[],this.c++);var g=jb(f,c,d,e);-1<g?(a=f[g],b||(a.B=!1)):(a=new gb(c,this.src,a,!!d,e),a.B=b,f.push(a));return a};function kb(a,c){var b=c.type;if(b in a.b){var d=a.b[b],e=Fa(d,c),f;(f=0<=e)&&A.splice.call(d,e,1);f&&(hb(c),0==a.b[b].length&&(delete a.b[b],a.c--))}}function jb(a,c,b,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.p&&f.m==c&&f.capture==!!b&&f.F==d)return e}return-1};var lb=!w||w&&9<=Ca,mb=w&&!y("9");!sa||y("528");x&&y("1.9b")||w&&y("8")||qa&&y("9.5")||sa&&y("528");x&&!y("8")||w&&y("9");function D(a,c){this.type=a;this.b=this.q=c}D.prototype.M=function(){};D.prototype.c=!1;D.prototype.d=!0;D.prototype.preventDefault=function(){this.d=!1};function nb(a){nb[" "](a);return a}nb[" "]=function(){};function ob(a,c){if(a){var b=this.type=a.type;D.call(this,b);this.q=a.target||a.srcElement;this.b=c;var d=a.relatedTarget;if(d&&x)try{nb(d.nodeName)}catch(e){}this.offsetX=sa||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=sa||void 0!==a.offsetY?a.offsetY:a.layerY;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==b?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.Q=a;a.defaultPrevented&&this.preventDefault();delete this.c}}u(ob,D);m=ob.prototype;m.q=null;
m.offsetX=0;m.offsetY=0;m.keyCode=0;m.charCode=0;m.ctrlKey=!1;m.altKey=!1;m.Q=null;m.preventDefault=function(){ob.J.preventDefault.call(this);var a=this.Q;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,mb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(c){}};var pb={},qb={},E={};function rb(a,c,b,d,e){if("array"==r(c))for(var f=0;f<c.length;f++)rb(a,c[f],b,d,e);else if(b=sb(b),cb(a))a.j.add(c,b,!1,d,e);else{f=b;if(!c)throw Error("Invalid event type");b=!!d;var g=ea(a),h=qb[g];h||(qb[g]=h=new ib(a));d=h.add(c,f,!1,d,e);d.H||(e=tb(),d.H=e,e.src=a,e.m=d,a.addEventListener?a.addEventListener(c,e,b):a.attachEvent(c in E?E[c]:E[c]="on"+c,e),pb[d.key]=d)}}
function tb(){var a=ub,c=lb?function(b){return a.call(c.src,c.m,b)}:function(b){b=a.call(c.src,c.m,b);if(!b)return b};return c}function vb(a,c,b,d,e){if("array"==r(c))for(var f=0;f<c.length;f++)vb(a,c[f],b,d,e);else(b=sb(b),cb(a))?(a=a.j,c in a.b&&(f=a.b[c],b=jb(f,b,d,e),-1<b&&(hb(f[b]),A.splice.call(f,b,1),0==f.length&&(delete a.b[c],a.c--)))):a&&(d=!!d,a=wb(a))&&(c=a.b[c],a=-1,c&&(a=jb(c,b,d,e)),(b=-1<a?c[a]:null)&&xb(b))}
function xb(a){if("number"!=typeof a&&a&&!a.p){var c=a.src;if(cb(c))kb(c.j,a);else{var b=a.type,d=a.H;c.removeEventListener?c.removeEventListener(b,d,a.capture):c.detachEvent&&c.detachEvent(b in E?E[b]:E[b]="on"+b,d);(b=wb(c))?(kb(b,a),0==b.c&&(b.src=null,delete qb[ea(c)])):hb(a);delete pb[a.key]}}}function yb(a,c,b,d){var e=1;if(a=wb(a))if(c=a.b[c])for(c=Ha(c),a=0;a<c.length;a++){var f=c[a];f&&f.capture==b&&!f.p&&(e&=!1!==zb(f,d))}return Boolean(e)}
function zb(a,c){var b=a.m,d=a.F||a.src;a.B&&xb(a);return b.call(d,c)}
function ub(a,c){if(a.p)return!0;if(!lb){var b;if(!(b=c))a:{b=["window","event"];for(var d=q,e;e=b.shift();)if(null!=d[e])d=d[e];else{b=null;break a}b=d}e=b;b=new ob(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=b.b;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;!b.c&&0<=h;h--)b.b=e[h],d&=yb(e[h],f,!0,b);for(h=0;!b.c&&h<e.length;h++)b.b=e[h],d&=yb(e[h],f,!1,
b)}return d}return zb(a,new ob(c,this))}function wb(a){return a[fa]?qb[ea(a)]||null:null}var Ab="__closure_events_fn_"+(1E9*Math.random()>>>0);function sb(a){return"function"==r(a)?a:a[Ab]||(a[Ab]=function(c){return a.handleEvent(c)})};function F(){B.call(this);this.j=new ib(this);this.r=this}u(F,B);F.prototype[bb]=!0;F.prototype.e=null;F.prototype.removeEventListener=function(a,c,b,d){vb(this,a,c,b,d)};
function Bb(a,c){var b,d=a.e;if(d)for(b=[];d;d=d.e)b.push(d);var d=a.r,e=c,f=e.type||e;if(ca(e))e=new D(e,d);else if(e instanceof D)e.q=e.q||d;else{var g=e,e=new D(f,d);Ea(e,g)}var g=!0,h;if(b)for(var k=b.length-1;!e.c&&0<=k;k--)h=e.b=b[k],g=Cb(h,f,!0,e)&&g;e.c||(h=e.b=d,g=Cb(h,f,!0,e)&&g,e.c||(g=Cb(h,f,!1,e)&&g));if(b)for(k=0;!e.c&&k<b.length;k++)h=e.b=b[k],g=Cb(h,f,!1,e)&&g}
F.prototype.k=function(){F.J.k.call(this);if(this.j){var a=this.j,c=0,b;for(b in a.b){for(var d=a.b[b],e=0;e<d.length;e++)++c,hb(d[e]);delete a.b[b];a.c--}}this.e=null};function Cb(a,c,b,d){c=a.j.b[c];if(!c)return!0;c=Ha(c);for(var e=!0,f=0;f<c.length;++f){var g=c[f];if(g&&!g.p&&g.capture==b){var h=g.m,k=g.F||g.src;g.B&&kb(a.j,g);e=!1!==h.call(k,d)&&e}}return e&&!1!=d.d};function Db(a,c){F.call(this);this.W=void 0!==a?a:!0;this.c=c||Eb;this.d=this.c(this.u)}u(Db,F);m=Db.prototype;m.i=null;m.v=null;m.t=void 0;m.L=!1;m.u=0;function Eb(a){return Math.min(1E3*Math.pow(2,a),6E4)}m.V=function(a,c){null!=this.b&&q.clearTimeout(this.b);this.b=null;this.v=a;this.i=(this.t=c)?new WebSocket(this.v,this.t):new WebSocket(this.v);this.i.onopen=s(this.ba,this);this.i.onclose=s(this.Z,this);this.i.onmessage=s(this.aa,this);this.i.onerror=s(this.$,this)};
function Fb(a){null!=a.b&&q.clearTimeout(a.b);a.b=null;a.i&&(a.L=!0,a.i.close(),a.i=null)}m.ba=function(){Bb(this,"d");this.u=0;this.d=this.c(this.u)};
m.Z=function(){Bb(this,"a");this.i=null;if(this.L)this.v=null,this.t=void 0;else if(this.W){var a=s(this.V,this,this.v,this.t),c=this.d;if("function"==r(a))this&&(a=s(a,this));else if(a&&"function"==typeof a.handleEvent)a=s(a.handleEvent,a);else throw Error("Invalid listener argument");this.b=2147483647<c?-1:q.setTimeout(a,c||0);this.u++;this.d=this.c(this.u)}this.L=!1};m.aa=function(a){Bb(this,new Gb(a.data))};m.$=function(a){Bb(this,new Hb(a.data))};m.k=function(){Db.J.k.call(this);Fb(this)};
function Gb(a){D.call(this,"c");this.message=a}u(Gb,D);function Hb(a){D.call(this,"b");this.data=a}u(Hb,D);Ta("rnoadm.net");var G=new Db,Ib=!1;function H(a){Ib&&(a=JSON.stringify(a),G.i.send(a))}G.V("wss://"+location.host+"/ws");rb(G,"d",Jb);rb(G,"a",Kb);rb(G,"c",Lb);var Mb=[],Nb=[];function Jb(){Ib=!0;Mb.forEach(function(a){a()})}function Kb(){Ib=!1;Nb.forEach(function(a){a()})}var I={};function Lb(a){a=JSON.parse(a.message);var c,b;for(b in a)if(c=I[b])"Kick"==b&&Fb(G),c(a[b])};var K=document.createElement("canvas");aa("screenshot",function(){window.open(K.toDataURL())});var L=K.getContext("2d"),M=window.innerWidth,N=window.innerHeight;K.width=M;K.height=N;window.addEventListener("resize",function(){K.width=M=window.innerWidth;K.height=N=window.innerHeight;O()},!1);var Ob=Infinity,Pb=0;function O(a){a=!isNaN(a)&&0<a?a:0;var c=a+Date.now();Ob>c&&(Pb&&clearTimeout(Pb),Pb=setTimeout(function(){window.requestAnimationFrame(Qb);Pb=0;Ob=Infinity},a),Ob=c)}var Rb=!1;
Mb.push(function(){Rb=!0;O()});Nb.push(function(){Rb=!1;O()});
function Qb(){L.clearRect(0,0,M,N);if(Rb){for(var a=M,c=N,b=Sb(),d=Tb(),b=a/2/32-b,d=c/2/32-d,e=0;256>e;e+=16)for(var f=0;256>f;f+=16)Ub(Vb,b+e+8-0.5,d+f+16-1);for(var g=0;2>g;g++)for(Wb=!g,f=Math.max(0,Math.floor(-c/2-d));f<Math.min(256,Math.floor(c/2-d));f++){for(e=Math.max(0,Math.floor((-a/2-b)/2));e<Math.min(128,Math.floor((a/2-b)/2));e++){var h=P[e<<1|f<<8];if(h)for(var k in h)Xb(h[k],b,d)}for(e=Math.max(0,Math.floor((-a/2-b)/2));e<Math.min(128,Math.floor((a/2-b)/2));e++)if(h=P[e<<1|f<<8|1])for(k in h)Xb(h[k],
b,d)}Yb()}else R($b,M/2/32,N/2/32)}K.onmousemove=function(a){var c=a.offsetX||a.layerX;a=a.offsetY||a.layerY;var b=M,d=N;ac(c,a,b,d)&&(a=c=-Infinity);bc(c,a,b,d)};K.onmouseout=function(){var a=M,c=N;ac(-Infinity,-Infinity,a,c);bc(-Infinity,-Infinity,a,c)};var cc=!0;window.addEventListener("blur",function(){cc=!1},!1);window.addEventListener("focus",function(){setTimeout(function(){cc=!0},100)},!1);
K.onclick=function(a){if(cc){var c=a.offsetX||a.layerX,b=a.offsetY||a.layerY,d=M;a=N;var e;a:if(ac(c,b,d,a),dc)ec("inv"),e=!0;else{for(e=S.length-1;0<=e;e--)if(S[e].d(c,b,d,a)){e=!0;break a}e=!1}if(!(e||(d=d/2/32-Sb(),a=a/2/32-Tb(),c=Math.floor(c/32-d),b=Math.ceil(b/32-a),0>c||256<=c||0>b||256<=b))){a=[];for(var f in P[c|b<<8])"_"!=f.charAt(0)&&(d=P[c|b<<8][f],"_fl"!=d.c[0].c&&d.n.length&&a.unshift(d));a.length?H({Interact:{ID:a[0].id,X:a[0].x,Y:a[0].y,Action:a[0].n[0]}}):H({Walk:{X:c,Y:b}})}}else cc=
!0};K.oncontextmenu=function(a){a.preventDefault();cc=!0;var c=a.offsetX||a.layerX,b=a.offsetY||a.layerY,d=M;a=N;var e;a:{ac(c,b,d,a);for(e=S.length-1;0<=e;e--)if(S[e].g(c,b,d,a)){e=!0;break a}e=!1}if(!(e||(d=d/2/32-Sb(),a=a/2/32-Tb(),c=Math.floor(c/32-d),b=Math.ceil(b/32-a),0>c||256<=c||0>b||256<=b))){a=[];for(var f in P[c|b<<8])"_"!=f.charAt(0)&&a.unshift(P[c|b<<8][f]);1==a.length?ec("menu",a[0]):a.length&&ec("menu2",a)}};function fc(a,c,b,d,e,f,g,h){function k(){function a(b,c){return d?b:128<=b?255-(255-b)*(255-c)/127:b*c/127}if(l.width&&l.height){n.width=l.width;n.height=l.height;var b=n.getContext("2d"),d="no"==c;d&&(c="#000");b.fillStyle=c;b.fillRect(0,0,1,1);var e=b.getImageData(0,0,1,1),f=e.data[0],g=e.data[1],h=e.data[2],k=e.data[3];b.clearRect(0,0,1,1);b.drawImage(l,0,0);e=b.getImageData(0,0,l.width,l.height);n.width*=p;n.height*=p;for(var ra=b.getImageData(0,0,n.width,n.height),Zb=0,Q=0,da=0,db=0;db<n.height;db++){for(var eb=
0;eb<n.width;eb++)ra.data[da+0]=a(e.data[Q+0],f),ra.data[da+1]=a(e.data[Q+1],g),ra.data[da+2]=a(e.data[Q+2],h),ra.data[da+3]=e.data[Q+3]*k/255,eb%p==p-1&&(Q+=4),da+=4;db%p==p-1?Zb=Q:Q=Zb}b.putImageData(ra,0,0);O()}}var n=document.createElement("canvas");this.g=n;this.c=b;this.o=d;this.r=e;this.e=f;this.d=g;var p=Math.floor(h)||1;this.b=p;var l;a+=".png";(l=gc[a])?k():(l=new Image,l.onload=function(){gc[a]=l;k()},l.src=a)}var gc={};
function Ub(a,c,b){function d(){L.drawImage(g.g,Math.floor(e*g.e*g.b),Math.floor(f*g.d*g.b),Math.floor(g.e*g.b),Math.floor(g.d*g.b),Math.floor(32*c-(g.e*g.b-32)/2),Math.floor(32*b-g.d*g.b),Math.floor(g.e*g.b),Math.floor(g.d*g.b))}var e=a.o,f=a.r,g=a;if(Wb)"_fl"==a.c&&(b+=0.5,d());else{switch(a.c){case "ccr":e+=[0,6,3,9][Math.floor(Date.now()/1500)%4];O(1500-Date.now()%1500);break;case "wa":e+=[0,1,0,2][Math.floor(Date.now()/150)%4];O(150-Date.now()%150);break;case "l2":e+=Math.floor(Date.now()/150)%
2;O(150-Date.now()%150);break;case "l3":e+=Math.floor(Date.now()/150)%3;O(150-Date.now()%150);break;case "_ac":if(2>f)break;a=Date.now()/1E4;switch(f){case 2:case 3:case 4:case 5:b+=Math.sin(5*a+7*Math.cos(3*a)+f)/8}O(100);break;case "wa_ac":e+=[0,1,0,2][Math.floor(Date.now()/150)%4];O(50);if(2>f)break;a=Date.now()/1E4;switch(f){case 2:case 3:case 4:case 5:b+=Math.sin(5*a+7*Math.cos(3*a)+f)/8}break;case "_fl":return}d()}}var Wb=!1;
function hc(a){return new fc(a.S,a.C,a.E.a||"",a.E.x||0,a.E.y||0,a.E.w||32,a.E.h||32,a.E.s||1)};function ic(a,c,b,d){this.id=b;this.d=this.x=a;this.e=this.y=c;this.b=0;this.name=d.N;var e=[];this.c=e;(d.S||[]).forEach(function(a){e.push(hc(a))});this.n=d.A||[]}function jc(a,c){a.name=c.N;a.n=c.A||[];var b=a.c;b.length=0;(c.S||[]).forEach(function(a){b.push(hc(a))})}function kc(a,c,b){a.d=lc(a.x,a.d,a.b);a.e=lc(a.y,a.e,a.b);a.x=c;a.y=b;a.b=Date.now()}function Xb(a,c,b){var d=lc(a.x,a.d,a.b),e=lc(a.y,a.e,a.b);a.c.forEach(function(a){Ub(a,d+c,e+b)})}
function lc(a,c,b){b=Date.now()-b;return 400>b?(O(),(b*a+(400-b)*c)/400):a};function T(a,c,b,d){this.b=a;this.g=c;this.d=b?1:0.5;this.c=32*this.d+"px "+(b?'"Jolly Lodger"':'"Open Sans Condensed"');this.e=!d}T.prototype.width=function(){L.font=this.c;return L.measureText(this.b).width/32};T.prototype.height=function(){return this.d};function R(a,c,b){L.font=a.c;var d=L.measureText(a.b).width;c=Math.floor(32*c-(a.e?d/2:0));b=Math.floor(32*b);L.fillStyle="rgba(0,0,0,.2)";for(d=-1;1>=d;d++)for(var e=-1;2>=e;e++)L.fillText(a.b,c+d,b+e);L.fillStyle=a.g;L.fillText(a.b,c,b)}
var $b=new T("connection lost","#aaa",!0);function mc(a,c,b,d,e){this.c=a;this.e=c;this.b=b;this.d=d;this.g=e}
var S=[],nc=new T("Character","#ccc",!0),oc=new T("change name","#aaa",!1),pc=new T("change name","#fff",!1),qc=new T("change skin color","#aaa",!1),rc=new T("change skin color","#fff",!1),sc=new T("change shirt color","#aaa",!1),tc=new T("change shirt color","#fff",!1),uc=new T("change pants color","#aaa",!1),vc=new T("change pants color","#fff",!1),wc=new T("Confirm","#aaa",!0),xc=new T("Confirm","#fff",!0),yc=new T("[push enter to chat]","#ccc",!1,!0),U={};
function ec(a,c){var b=U[a](c||{});b.b(zc[0],zc[1],zc[2],zc[3]);var d=!1;S.forEach(function(c,f){if(c.c==a)return d=!0,S[f]=b,!1});d||S.push(b);O()}function V(a){S.forEach(function(c,b){if(c.c==a)return S.splice(b,1),O(),!1})}I.HUD=function(a){S.length=0;O();a.N.length&&ec(a.N,a.D)};var dc=!1,Ac=new fc("ui_icons","no","",0,0,32,32),Bc=new fc("ui_icons","#bbb","",0,0,32,32);
function Yb(){var a=M,c=N;null==W?R(yc,0.1,c/32-0.1):R(new T(W+"_","#fff",!1,!0),0.1,c/32-0.1);Cc.forEach(function(a,d){R(a,0.1,c/32-d/2-0.6)});dc?Ub(Bc,a/32-1,c/32):Ub(Ac,a/32-1,c/32);S.forEach(function(b){b.e(a,c)})}var zc=[-Infinity,-Infinity,1,1];function ac(a,c,b,d){zc=[a,c,b,d];if(a>=b-32&&a<=b&&c>=d-32&&c<=d)return dc||(dc=!0,O()),!0;dc&&(dc=!1,O());for(var e=S.length-1;0<=e;e--)if(S[e].b(a,c,b,d))return!0;return!1}
window.addEventListener("keydown",function(a){if(K.parentNode&&!a.ctrlKey&&!a.altKey)switch(20>a.keyCode&&a.preventDefault(),a.keyCode){case 8:null!==W&&0<W.length&&(W=W.substring(0,W.length-1),O());break;case 13:null===W?W="":(H({Chat:W}),W=null);O();break;case 27:null!==W&&(W=null,O())}},!1);window.addEventListener("keypress",function(a){null!==W&&(W+=String.fromCharCode(a.charCode),O())},!1);Mb.push(function(){W=null});var W=null,Cc=[];
I.Msg=function(a){a.forEach(function(a){Cc.unshift(new T(a.T,a.C,!1,!0));window.console.log(a.T);window.setTimeout(function(){Cc.pop()},6E4);O()})};var X=[];I.Inventory=function(a){var c={};X.forEach(function(a){c[a.id]=a});X.length=0;a.forEach(function(a,d){var e=c[a.I];e?(jc(e,a.O),kc(e,d%8,Math.floor(d/8))):e=new ic(d%8,Math.floor(d/8),a.I,a.O);X.push(e)});O()};Ta("rnoadm.state");var P=Array(65536);I.Update=function(a){a.forEach(function(a){var b=a.I,d=a.X,e=a.Y,f=a.Fx,g=a.Fy,h=a.R,k=a.O;a=d|e<<8;P[a]||(P[a]={});h?(delete P[a][b],O()):void 0!==k?b in P[a]?jc(P[a][b],k):P[a][b]=new ic(d,e,b,k):(f|=g<<8,P[a][b]=P[f][b],delete P[f][b],kc(P[a][b],d,e))});O()};var Dc=0,Ec=127,Fc=127;I.PlayerX=function(a){Fc!=a&&(Ec=Sb(),Fc=a,Dc=Date.now(),O())};function Sb(){return lc(Fc,Ec,Dc)}var Gc=0,Hc=127,Ic=127;I.PlayerY=function(a){Ic!=a&&(Hc=Tb(),Ic=a,Gc=Date.now(),O())};
function Tb(){return lc(Ic,Hc,Gc)}Nb.push(function(){for(var a=0;a<P.length;a++)delete P[a]});var Vb=new fc("grass","#268f1e","",0,0,512,512),Jc=-1,Kc=-1;
function bc(a,c,b,d){b=b/2/32-Sb();d=d/2/32-Tb();a=Math.floor(a/32-b);c=Math.ceil(c/32-d);if(a!=Jc||c!=Kc)if(K.style.cursor="",!(0>a||255<a||0>c||255<c)){d="";for(var e in P[a|c<<8])"_"!=e.charAt(0)&&(b=P[a|c<<8][e],"_fl"!=b.c[0].c&&b.n.length&&(d=b.n[0]));d&&(K.style.cursor="url(cursor_"+d+".png),auto");-1==Jc&&(Jc=a,Kc=c);H({Mouse:{Fx:Jc,Fy:Kc,X:a,Y:c}});Jc=a;Kc=c}};new function(){ja()};!x&&!w||w&&w&&9<=Ca||x&&y("1.9.1");w&&y("9");var Y=window.sessionStorage.rnoadm_username||"",Z=window.sessionStorage.rnoadm_password||"",$=document.querySelector("form"),Lc=$.querySelector("#username"),Mc=$.querySelector("#password"),Nc=$.querySelector("#password2");Mb.push(function(){Y.length&&2<Z.length&&(Lc.value=Y,Mc.value=Z,Nc.value=Z,$.onsubmit())});aa("admin",function(a){H({Admin:[].slice.call(arguments).map(String)})});Mc.onchange=function(){Nc.value=Mc.value};
$.onsubmit=function(){Y=Lc.value;Z=Mc.value;if(Y.length)if(2>=Z.length)Y=Z="",Mc.focus();else{window.sessionStorage.rnoadm_username=Y;window.sessionStorage.rnoadm_password=Z;H({Auth:{U:Y,P:Z}});var a=$.parentNode;a&&(a.removeChild($),a.style.overflow="hidden",a.style.fontSize="0",a.appendChild(K))}else Y=Z="",Lc.focus()};I.Kick=function(a){window.sessionStorage.rnoadm_username=Y="";window.sessionStorage.rnoadm_password=Z="";alert(a)};var Oc;
U.cc=function(a){var c=[];a.S.forEach(function(a){c.push(hc(a))});var b=new T(a.N,"#aaa",!0),d=new T(a.N,"#fff",!0),e=new T("change gender ("+a.G+")","#aaa",!1),f=new T("change gender ("+a.G+")","#fff",!1),g=!1,h=!1,k=!1,n=!1,p=!1,l=!1,z=!0;return new mc("cc",function(a,t){L.fillStyle="rgba(0,0,0,.7)";L.fillRect(0,0,a,t);a/=64;t/=64;c.forEach(function(b){Ub(b,a-3,t+1)});R(nc,a+2,t-4);g?(R(d,a,t+2),R(pc,a,t+2.5)):(R(b,a,t+2),R(oc,a,t+2.5));h?R(f,a+2,t-3):R(e,a+2,t-3);k?R(rc,a+2,t-2):R(qc,a+2,t-2);
n?R(tc,a+2,t-1):R(sc,a+2,t-1);p?R(vc,a+2,t):R(uc,a+2,t);l?R(xc,a,t+4):R(wc,a,t+4)},function(a,c,d,f){a/=32;c/=32;d/=64;f/=64;c>=f+2-b.height()&&c<=f+2.5&&Math.abs(d-a)<=Math.max(b.width(),oc.width())/2?(g||O(),g=!0,z=l=p=n=k=h=!1):c>=f-3-e.height()&&c<=f-3&&Math.abs(d+2-a)<=e.width()/2?(h||O(),g=!1,h=!0,z=l=p=n=k=!1):c>=f-2-qc.height()&&c<=f-2&&Math.abs(d+2-a)<=qc.width()/2?(k||O(),h=g=!1,k=!0,z=l=p=n=!1):c>=f-1-sc.height()&&c<=f-1&&Math.abs(d+2-a)<=sc.width()/2?(n||O(),k=h=g=!1,n=!0,z=l=p=!1):c>=
f-uc.height()&&c<=f&&Math.abs(d+2-a)<=uc.width()/2?(p||O(),n=k=h=g=!1,p=!0,z=l=!1):c>=f+4-wc.height()&&c<=f+4&&Math.abs(d-a)<=wc.width()/2?(l||O(),p=n=k=h=g=!1,l=!0,z=!1):(z||O(),l=p=n=k=h=g=!1,z=!0);return!0},function(){switch(!0){case g:H({HUD:{N:"cc",D:"name"}});break;case h:H({HUD:{N:"cc",D:"gender"}});break;case k:H({HUD:{N:"cc",D:"skin"}});break;case n:H({HUD:{N:"cc",D:"shirt"}});break;case p:H({HUD:{N:"cc",D:"pants"}});break;case l:H({HUD:{N:"cc",D:"accept"}})}return!0},function(){return!0})};
U.examine=function(a){var c=new T(a.N,"#ccc",!0,!0),b=new T(a.E,"#ccc",!1,!0),d=[];(a.I||[]).forEach(function(a){var b=[];d.push(b);a.forEach(function(a){b.push(new T(a[0],a[1],!1,!0))})});return new mc("examine",function(a,f){L.fillStyle="rgba(0,0,0,.7)";L.fillRect(0,0,a,f);var g=a/2/32-6,h=f/2/32-6;R(c,g,h);h+=0.5;R(b,g,h);h+=1;d.forEach(function(b){g=a/2/32-6;b.forEach(function(a){R(a,g,h);g+=a.width()});h+=0.5})},function(){return!0},function(){V("examine");return!0},function(){V("examine");return!0})};
U.forge=function(){var a=new fc("forge","#888","",0,0,64,32),c=new T("Forge","#ccc",!0);return new mc("forge",function(b,d){L.fillStyle="rgba(0,0,0,.7)";L.fillRect(b/2-240,d/2-192,512,384);L.fillStyle="#000";L.fillRect(b/2-240,d/2-192,512,32);var e=b/32/2,f=d/32/2;Ub(a,e-7,f-5);R(c,e+1,f-5)},function(a,c,e,f){return 7.5<Math.abs(a/32-e/32/2)||6<Math.abs(c/32-f/32/2)?!1:!0},function(a,c,e,f){return 7.5<Math.abs(a/32-e/32/2)||6<Math.abs(c/32-f/32/2)?(V("forge"),!1):!0},function(a,c,e,f){return 7.5<
Math.abs(a/32-e/32/2)||6<Math.abs(c/32-f/32/2)?(V("forge"),!1):!0})};
U.inv=function(){var a=-1,c=-1,b=-Infinity,d=-Infinity;return new mc("inv",function(e,f){var g=Math.ceil(X.length/8),h=e/32-8.1,k=f/32-0.1-g;L.fillStyle="rgba(0,0,0,.7)";L.fillRect(e-262.4,f-32*(g+1.2),262.4,32*(g+0.2));X.forEach(function(a){Xb(a,h,k)});if(0<=a&&8>a&&0<=c&&c<g&&a+8*c<X.length){var g=new T(X[a+8*c].name,"#fff",!1,!0),n=32*(g.width()+0.2),p=32*(g.height()+0.2);L.fillStyle="rgba(0,0,0,.7)";L.fillRect(b-n,d,n,p);R(g,b/32-g.width()-0.1,d/32+g.height()+0.1)}},function(e,f,g,h){var k=Math.ceil(X.length/
8);b=e;d=f;a=Math.floor((e-g)/32+8.1);c=Math.floor((f-h)/32+k+1.1);O();if(c>k||-1>a)V("inv");else return!0},function(){return!0},function(){var b=Math.ceil(X.length/8);0<=a&&8>a&&0<=c&&c<b&&a+8*c<X.length&&ec("menu",X[a+8*c])})};
U.menu=function(a){var c=-1,b=null,d=null,e=!1,f=[],g=[],h=a.n;h.forEach(function(b){b=b+" "+a.name;f.push(new T(b,"#aaa",!1,!0));g.push(new T(b,"#fff",!1,!0))});var k=-2;f.forEach(function(a){k=Math.max(a.width(),k)});var k=32*(k+0.2),n=Math.floor(32*(h.length/2+0.2));return new mc("menu",function(a,l){e&&(e=!1,b+k>a&&(b=a-k),d+n>l&&(d=l-n));L.fillStyle="rgba(0,0,0,.7)";L.fillRect(b||0,d||0,k,n);-1!=c&&(L.fillStyle="#000",L.fillRect(b||0,(d||0)+32*(c/2+0.1),k,16));for(var z=b/32+0.1,J=d/32+0.5,t=
0;t<h.length;t++)t==c?R(g[t],z,J+t/2):R(f[t],z,J+t/2)},function(a,f){null===b&&(b=a,d=f,e=!0,O());a>=b&&a<b+k&&f>=Math.floor(d+3.2)&&f<Math.floor(d+32*(h.length/2+0.1))?(c=Math.floor(2*(f-d)/32-0.1),c>=h.length&&(c=-1)):(c=-1,(a<b-32||a>b+k+32||f<Math.floor(d-32)||f>d+n+32)&&V("menu"));O();return!0},function(){-1!=c&&H({Interact:{ID:a.id,X:a.x,Y:a.y,Action:h[c]}});V("menu");return!0},function(){V("menu");return!0})};
U.menu2=function(a){var c=-1,b=null,d=null,e=!1,f=[],g=[];a.forEach(function(a){a=a.name;f.push(new T(a,"#aaa",!1,!0));g.push(new T(a,"#fff",!1,!0))});var h=-2;f.forEach(function(a){h=Math.max(a.width(),h)});var h=32*(h+0.2),k=Math.floor(32*(a.length/2+0.2));return new mc("menu2",function(n,p){e&&(e=!1,b+h>n&&(b=n-h),d+k>p&&(d=p-k));L.fillStyle="rgba(0,0,0,.7)";L.fillRect(b||0,d||0,h,k);-1!=c&&(L.fillStyle="#000",L.fillRect(b||0,(d||0)+32*(c/2+0.1),h,16));for(var l=b/32+0.1,z=d/32+0.5,J=0;J<a.length;J++)J==
c?R(g[J],l,z+J/2):R(f[J],l,z+J/2)},function(f,g){null===b&&(b=f,d=g,e=!0,O());f>=b&&f<b+h&&g>=Math.floor(d+3.2)&&g<d+Math.floor(32*(a.length/2+0.1))?(c=Math.floor(2*(g-d)/32-0.1),c>=a.length&&(c=-1)):(c=-1,(f<b-32||f>b+h+32||g<d-32||g>d+k+32)&&V("menu2"));O();return!0},function(){-1!=c&&ec("menu",a[c]);V("menu2");return!0},function(){V("menu2");return!0})};Ta("rnoadm.main");I.ClientHash=function(a){void 0!==Oc?Oc!=a&&location.reload(!0):Oc=a};
